<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convert monitor data into an AQI category table — monitor_toAQCTable • AirMonitor</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Convert monitor data into an AQI category table — monitor_toAQCTable"><meta property="og:description" content="Creates a table of AQI category vs monitoring site with a count
of the number of times each AQI category was experienced at each site. The
count will be a count of hours or days depending on averaging period of
the incoming monitor object.
When siteIdentifier is used, the identifiers must be in the same
order as monitor$meta."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AirMonitor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/AirMonitor.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Citations.html">Citations</a>
    </li>
    <li>
      <a href="../articles/Data_Model.html">Data Model</a>
    </li>
    <li>
      <a href="../articles/Developer_Style_Guide.html">Developer Style Guide</a>
    </li>
    <li>
      <a href="../articles/NowCast.html">NowCast</a>
    </li>
    <li>
      <a href="../articles/Save_Data_as_CSV.html">Example: Save Data as CSV</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/MazamaScience/AirMonitor/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert monitor data into an AQI category table</h1>
    <small class="dont-index">Source: <a href="https://github.com/MazamaScience/AirMonitor/blob/HEAD/R/monitor_toAQCTable.R" class="external-link"><code>R/monitor_toAQCTable.R</code></a></small>
    <div class="hidden name"><code>monitor_toAQCTable.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a table of AQI category vs monitoring site with a count
of the number of times each AQI category was experienced at each site. The
count will be a count of hours or days depending on averaging period of
the incoming <code>monitor</code> object.</p>
<p>When <code>siteIdentifier</code> is used, the identifiers must be in the same
order as <code>monitor$meta</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">monitor_toAQCTable</span><span class="op">(</span></span>
<span>  <span class="va">monitor</span>,</span>
<span>  NAAQS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PM2.5_2024"</span>, <span class="st">"PM2.5"</span><span class="op">)</span>,</span>
<span>  siteIdentifier <span class="op">=</span> <span class="st">"locationName"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>monitor</dt>
<dd><p><em>mts_monitor</em> object.</p></dd>


<dt>NAAQS</dt>
<dd><p>Version of NAAQS levels to use. See Note.</p></dd>


<dt>siteIdentifier</dt>
<dd><p>Metadata column used to identify sites or a character
vector with site identifiers.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Table of AQI category counts.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>On February 7, 2024, EPA strengthened the National Ambient Air Quality
Standards for Particulate Matter (PM NAAQS) to protect millions of Americans
from harmful and costly health impacts, such as heart attacks and premature
death. Particle or soot pollution is one of the most dangerous forms of air
pollution, and an extensive body of science links it to a range of serious
and sometimes deadly illnesses. EPA is setting the level of the primary
(health-based) annual PM2.5 standard at 9.0 micrograms per cubic meter to
provide increased public health protection, consistent with the available
health science.
See <a href="https://www.epa.gov/pm-pollution/final-reconsideration-national-ambient-air-quality-standards-particulate-matter-pm" class="external-link">PM NAAQS update</a>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MazamaScience/AirMonitor" class="external-link">AirMonitor</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Lane County, Oregon AQSIDs all begin with "41039"</span></span></span>
<span class="r-in"><span><span class="va">LaneCounty</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="va">NW_Megafires</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="monitor_filterMeta.html">monitor_filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">AQSID</span>, <span class="st">'^41039'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="monitor_filterDate.html">monitor_filterDate</a></span><span class="op">(</span><span class="fl">20150801</span>, <span class="fl">20150901</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Count of hours each site spent in each AQ category in August</span></span></span>
<span class="r-in"><span><span class="va">LaneCounty</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">monitor_toAQCTable</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                  Good Moderate USG Unhealthy Very Unhealthy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Hwy 99 (E99)             576      132   5        12             14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Amazon Park (Eap)        586      111  18        14             15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene  Wilkes Drive              581      125   8        10             12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Springfield - City Hall           566      139  12        16             11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oakridge - (Oak)                  491      210  18        25              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cottage Grove - City Shops (Cgc)  538      161  15        13             17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                  Hazardous Missing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Hwy 99 (E99)                    5       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Amazon Park (Eap)               0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene  Wilkes Drive                     8       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Springfield - City Hall                  0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oakridge - (Oak)                         0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cottage Grove - City Shops (Cgc)         0       0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Count of days each site spent in each AQ</span></span></span>
<span class="r-in"><span><span class="va">LaneCounty</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="monitor_dailyStatistic.html">monitor_dailyStatistic</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">monitor_toAQCTable</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                  Good Moderate USG Unhealthy Very Unhealthy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Hwy 99 (E99)              24        5   0         1              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Amazon Park (Eap)         23        6   0         2              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene  Wilkes Drive               23        6   0         1              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Springfield - City Hall            23        6   0         2              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oakridge - (Oak)                   20        9   1         1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cottage Grove - City Shops (Cgc)   19       10   1         1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                  Hazardous Missing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Hwy 99 (E99)                    0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Amazon Park (Eap)               0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene  Wilkes Drive                     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Springfield - City Hall                  0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oakridge - (Oak)                         0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cottage Grove - City Shops (Cgc)         0       0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Count of days each site spent in each AQ (simplified names)</span></span></span>
<span class="r-in"><span><span class="va">siteNames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"Eugene 1"</span>, <span class="st">"Eugene 2"</span>, <span class="st">"Eugene 3"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Springfield"</span>, <span class="st">"Oakridge"</span>, <span class="st">"Cottage Grove"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">LaneCounty</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="monitor_dailyStatistic.html">monitor_dailyStatistic</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">monitor_toAQCTable</span><span class="op">(</span>siteIdentifier <span class="op">=</span> <span class="va">siteNames</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               Good Moderate USG Unhealthy Very Unhealthy Hazardous Missing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene 1        24        5   0         1              1         0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene 2        23        6   0         2              0         0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene 3        23        6   0         1              1         0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Springfield     23        6   0         2              0         0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oakridge        20        9   1         1              0         0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cottage Grove   19       10   1         1              0         0       0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Count of days at each AQ level with the new, 2024 NAAQS</span></span></span>
<span class="r-in"><span><span class="va">LaneCounty</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="monitor_dailyStatistic.html">monitor_dailyStatistic</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">monitor_toAQCTable</span><span class="op">(</span>NAAQS <span class="op">=</span> <span class="st">"PM2.5_2024"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                  Good Moderate USG Unhealthy Very Unhealthy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Hwy 99 (E99)              24        5   0         1              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Amazon Park (Eap)         23        6   0         2              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene  Wilkes Drive               23        6   0         1              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Springfield - City Hall            23        6   0         2              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oakridge - (Oak)                   20        9   1         1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cottage Grove - City Shops (Cgc)   19       10   1         1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                  Hazardous Missing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Hwy 99 (E99)                    0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene - Amazon Park (Eap)               0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Eugene  Wilkes Drive                     0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Springfield - City Hall                  0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oakridge - (Oak)                         0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cottage Grove - City Shops (Cgc)         0       0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jonathan Callahan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

